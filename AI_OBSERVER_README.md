# AI Observer - –ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å –ø–µ—á–∞—Ç–∏ –±–∏–æ–ø—Ä–∏–Ω—Ç–µ—Ä–∞

## –û–ø–∏—Å–∞–Ω–∏–µ

AI Observer - —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–µ—á–∞—Ç–∏ —à–ø—Ä–∏—Ü–µ–≤—ã–º –Ω–∞—Å–æ—Å–æ–º –±–∏–æ–ø—Ä–∏–Ω—Ç–µ—Ä–∞. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã —Å–ª–æ—è –∏ —à–∏—Ä–∏–Ω—ã –¥–æ—Ä–æ–∂–∫–∏, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–µ—á–∞—Ç–∏.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üìπ **–í–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - –∑–∞—Ö–≤–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –≤–µ–±-–∫–∞–º–µ—Ä—ã
- üéØ **ROI (Region of Interest)** - –≤—ã–±–æ—Ä –æ–±–ª–∞—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
- üìè **–ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**:
  - –í—ã—Å–æ—Ç–∞ –ø–µ—á–∞—Ç–Ω–æ–≥–æ —Å–ª–æ—è (–º–º)
  - –®–∏—Ä–∏–Ω–∞ –¥–æ—Ä–æ–∂–∫–∏ (–º–º)
  - –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (—Å—Ä–µ–¥–Ω–µ–µ, –¥–∏—Å–ø–µ—Ä—Å–∏—è)
- üîç **–î–µ—Ç–µ–∫—Ü–∏—è –∫—Ä–∞–µ–≤** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Canny –∏ Sobel –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- üìä **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** - –≥—Ä–∞—Ñ–∏–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ—Ä–µ–Ω–∏–π
- üí° **–£–º–Ω—ã–µ —Å–æ–≤–µ—Ç—ã** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- üó£Ô∏è **–ì–æ–ª–æ—Å–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –æ–∑–≤—É—á–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- üìà **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤ CSV —Ñ–æ—Ä–º–∞—Ç–µ
- üé® **–û–≤–µ—Ä–ª–µ–∏ –∏ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏** - –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –Ω–∞ –≤–∏–¥–µ–æ

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **React 18** + **TypeScript** - UI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Vite** - —Å–±–æ—Ä—â–∏–∫ –∏ dev-—Å–µ—Ä–≤–µ—Ä
- **Tailwind CSS** - —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- **Zustand** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **OpenCV.js (WASM)** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **Web APIs**:
  - MediaDevices API - –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ
  - Canvas API - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - Web Speech API - –æ–∑–≤—É—á–∫–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
# –∏–ª–∏
pnpm install
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenCV.js (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)

–°–∫–∞—á–∞–π—Ç–µ OpenCV.js —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞:

```bash
mkdir -p public/opencv
cd public/opencv
# –°–∫–∞—á–∞–π—Ç–µ opencv.js –∏ opencv.wasm
wget https://docs.opencv.org/4.x/opencv.js
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CDN –≤–µ—Ä—Å–∏—é - –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `src/hooks/useOpenCV.ts`:

```typescript
script.src = 'https://docs.opencv.org/4.x/opencv.js'
```

### 3. –ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞

```bash
npm run dev
# –∏–ª–∏
pnpm dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `http://localhost:5173/ai-observer`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–∞–º–µ—Ä—É** - –≤—ã–±–µ—Ä–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
2. **–ù–∞–∂–º–∏—Ç–µ Start** - –Ω–∞—á–Ω–µ—Ç—Å—è –∑–∞—Ö–≤–∞—Ç –≤–∏–¥–µ–æ
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ ROI** - –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ä —Ä–∞–º–∫–∏, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –æ–±–ª–∞—Å—Ç—å –ø–µ—á–∞—Ç–∏
4. **–ö–∞–ª–∏–±—Ä—É–π—Ç–µ –º–∞—Å—à—Ç–∞–±** - –Ω–∞–∂–º–∏—Ç–µ `K` –∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –¥–≤–µ —Ç–æ—á–∫–∏ —Å –∏–∑–≤–µ—Å—Ç–Ω—ã–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ–º

### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

| –ö–ª–∞–≤–∏—à–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `C` | –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ ROI |
| `K` | –û—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ |
| `L` | –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å ROI |
| `Space` | –ü–∞—É–∑–∞/–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ |

### –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞

–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤ –º–∏–ª–ª–∏–º–µ—Ç—Ä–∞—Ö:

1. –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –æ–±—ä–µ–∫—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –≤ –æ–±–ª–∞—Å—Ç–∏ ROI (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–∏–Ω–µ–π–∫–∞)
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **–ö–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å** –∏–ª–∏ –∫–ª–∞–≤–∏—à—É `K`
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–∞—á–∞–ª–æ –æ–±—ä–µ–∫—Ç–∞
4. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–æ–Ω–µ—Ü –æ–±—ä–µ–∫—Ç–∞
5. –í–≤–µ–¥–∏—Ç–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (–º–º)
6. –ù–∞–∂–º–∏—Ç–µ **–í—ã—á–∏—Å–ª–∏—Ç—å**

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç `px/–º–º`.

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

#### –¶–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

- **–¶–µ–ª–µ–≤–∞—è –≤—ã—Å–æ—Ç–∞ —Å–ª–æ—è** (–º–º) - –æ–∂–∏–¥–∞–µ–º–∞—è –≤—ã—Å–æ—Ç–∞ –ø–µ—á–∞—Ç–Ω–æ–≥–æ —Å–ª–æ—è
- **–¶–µ–ª–µ–≤–∞—è —à–∏—Ä–∏–Ω–∞ –¥–æ—Ä–æ–∂–∫–∏** (–º–º) - –æ–∂–∏–¥–∞–µ–º–∞—è —à–∏—Ä–∏–Ω–∞ —ç–∫—Å—Ç—Ä—É–∑–∏–∏

#### –ü–æ—Ä–æ–≥–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏

- **Canny Min/Max** - –ø–æ—Ä–æ–≥–∏ –¥–ª—è –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∫—Ä–∞–µ–≤
- –†–µ–≥—É–ª–∏—Ä—É–π—Ç–µ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –¥–µ—Ç–µ–∫—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—Å–≤–µ—â–µ–Ω–∏—è

#### –§—É–Ω–∫—Ü–∏–∏

- ‚úÖ **–û–ø—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ç–æ–∫** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è —Å–æ–ø–ª–∞
- ‚úÖ **–û–∑–≤—É—á–∫–∞ —Å–æ–≤–µ—Ç–æ–≤** - –≥–æ–ª–æ—Å–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ **–°–µ—Ç–∫–∞ –º–∞—Å—à—Ç–∞–±–∞** - –≤–∏–∑—É–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞ –¥–ª—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

### –°–æ–≤–µ—Ç—ã –∏ —Å—Ç–∞—Ç—É—Å—ã

–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

| –°—Ç–∞—Ç—É—Å | –¶–≤–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|----------|
| ‚úÖ **OK** | –ó–µ–ª—ë–Ω—ã–π | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –Ω–æ—Ä–º–µ |
| ‚ö†Ô∏è **Warning** | –û—Ä–∞–Ω–∂–µ–≤—ã–π | –ù–µ–±–æ–ª—å—à–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ |
| ‚ùå **Bad** | –ö—Ä–∞—Å–Ω—ã–π | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ |

#### –¢–∏–ø–∏—á–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

- **–ù–µ–¥–æ-—ç–∫—Å—Ç—Ä—É–∑–∏—è** - —Å–ª–æ–π —Å–ª–∏—à–∫–æ–º —Ç–æ–Ω–∫–∏–π ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å –ø–æ–¥–∞—á—É –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- **–ü–µ—Ä–µ-—ç–∫—Å—Ç—Ä—É–∑–∏—è** - —Å–ª–æ–π —Å–ª–∏—à–∫–æ–º —Ç–æ–ª—Å—Ç—ã–π ‚Üí —É–º–µ–Ω—å—à–∏—Ç—å –ø–æ–¥–∞—á—É –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- **–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –ø–æ–¥–∞—á–∞** - –≤—ã—Å–æ–∫–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è —à–∏—Ä–∏–Ω—ã ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—è–∑–∫–æ—Å—Ç—å, –ø—É–∑—ã—Ä—å–∫–∏, –ª—é—Ñ—Ç

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ ai-observer/        # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ TopBar.tsx
‚îÇ       ‚îú‚îÄ‚îÄ CameraPanel.tsx
‚îÇ       ‚îú‚îÄ‚îÄ RoiOverlay.tsx
‚îÇ       ‚îú‚îÄ‚îÄ MetricsCards.tsx
‚îÇ       ‚îú‚îÄ‚îÄ StatusBanner.tsx
‚îÇ       ‚îú‚îÄ‚îÄ HistoryCharts.tsx
‚îÇ       ‚îú‚îÄ‚îÄ BottomLog.tsx
‚îÇ       ‚îú‚îÄ‚îÄ SettingsPanel.tsx
‚îÇ       ‚îî‚îÄ‚îÄ CalibrationDialog.tsx
‚îú‚îÄ‚îÄ hooks/                  # React —Ö—É–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ useVideoStream.ts   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ useRoi.ts           # –õ–æ–≥–∏–∫–∞ ROI
‚îÇ   ‚îú‚îÄ‚îÄ useOpenCV.ts        # –ó–∞–≥—Ä—É–∑–∫–∞ OpenCV
‚îÇ   ‚îú‚îÄ‚îÄ useImageProcessing.ts # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–¥—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ useOpticalFlow.ts   # –û–ø—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ useHistoryStats.ts  # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ useSpeech.ts        # –û–∑–≤—É—á–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ useCsvLog.ts        # –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ useSettings.ts      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ processing/         # –ê–ª–≥–æ—Ä–∏—Ç–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ baseline.ts     # –î–µ—Ç–µ–∫—Ü–∏—è –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edges.ts        # –î–µ—Ç–µ–∫—Ü–∏—è –∫—Ä–∞–µ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ measure.ts      # –ò–∑–º–µ—Ä–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ overlays.ts     # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ–≤–µ—Ä–ª–µ–µ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ advice.ts       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–≤–µ—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ types.ts            # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ store/                  # Zustand stores
‚îÇ   ‚îú‚îÄ‚îÄ settingsStore.ts    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ sessionStore.ts     # –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏
‚îî‚îÄ‚îÄ pages/
    ‚îî‚îÄ‚îÄ AIObserver.tsx      # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```

## –ê–ª–≥–æ—Ä–∏—Ç–º—ã

### 1. –î–µ—Ç–µ–∫—Ü–∏—è –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –•–∞—Ñ–∞ (HoughLinesP) –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–∏ —Å—Ç–æ–ª–∞:

- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É–≥–ª—É (–±–ª–∏–∑–∫–æ–º—É –∫ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏)
- –í—ã–±–æ—Ä —Å–∞–º–æ–π –¥–ª–∏–Ω–Ω–æ–π –ª–∏–Ω–∏–∏ –≤ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- Fallback –Ω–∞ —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ OpenCV

### 2. –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã —Å–ª–æ—è

1. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ Canny edge detection
2. –ü–æ–∏—Å–∫ –≤–µ—Ä—Ö–Ω–µ–π –∫—Ä–æ–º–∫–∏ —Å–ª–æ—è –Ω–∞–¥ –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–µ–π
3. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã: `h_px = base_y - top_y`
4. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –º–º: `h_mm = h_px / px_per_mm`

### 3. –ò–∑–º–µ—Ä–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –¥–æ—Ä–æ–∂–∫–∏

1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–±—ã: `y_probe = top_y + 0.4 * h_px`
2. –ü–æ–∏—Å–∫ –ª–µ–≤–æ–≥–æ –∏ –ø—Ä–∞–≤–æ–≥–æ –∫—Ä–∞—è –¥–æ—Ä–æ–∂–∫–∏
3. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã: `w_px = right_x - left_x`
4. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –º–º: `w_mm = w_px / px_per_mm`

### 4. –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

- –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö N –∏–∑–º–µ—Ä–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é N=30)
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
- –î–µ—Ç–µ–∫—Ü–∏—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏: `œÉ(w)/avg(w) > 0.15`

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –¶–µ–ª–µ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞: **20-30 FPS**
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ: **1280√ó720** (–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å)
- ROI –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–æ 70% –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- Graceful fallback –Ω–∞ Canvas2D –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ OpenCV

## Troubleshooting

### –ö–∞–º–µ—Ä–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –∏–ª–∏ localhost (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ MediaDevices API)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –∫–∞–º–µ—Ä–∞ –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

### –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä ROI
- –°–Ω–∏–∑–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã –≤ `useVideoStream.ts`
- –û—Ç–∫–ª—é—á–∏—Ç–µ –æ–ø—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ç–æ–∫
- –£–≤–µ–ª–∏—á—å—Ç–µ –ø–æ—Ä–æ–≥–∏ Canny –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫—É `px/–º–º`
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ—Ä–æ–≥–∏ Canny (—Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–µ = —à—É–º, —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–µ = –ø—Ä–æ–ø—É—Å–∫ –∫—Ä–∞–µ–≤)
- –£–ª—É—á—à–∏—Ç–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ —Å—Ü–µ–Ω—ã
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ ROI –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –æ–±–ª–∞—Å—Ç—å –ø–µ—á–∞—Ç–∏ —Å –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–µ–π

### OpenCV –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ `public/opencv/`
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback (Canvas2D) - –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ OpenCV

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `src/lib/processing/`
2. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å —è–≤–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏
3. –î–æ–±–∞–≤—å—Ç–µ –≤—ã–∑–æ–≤ –≤ `useImageProcessing`

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ UI-–ø—Ä–∏–º–∏—Ç–∏–≤—ã –∏–∑ `src/components/ui/`
2. –°–ª–µ–¥—É–π—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω—É controlled/uncontrolled –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
3. –¢–∏–ø–∏–∑–∏—Ä—É–π—Ç–µ props —á–µ—Ä–µ–∑ `interface`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
npm run typecheck  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
npm run lint       # –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π. –î–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.

