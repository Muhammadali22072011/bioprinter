# AI Observer - –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## üì¶ –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `package.json`:
- `zustand: ^4.5.0` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –¢–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- ‚úÖ `src/lib/types.ts` - TypeScript —Ç–∏–ø—ã –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### Stores (Zustand)
- ‚úÖ `src/store/settingsStore.ts` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ü–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ—Ä–æ–≥–∏, —Ñ–ª–∞–≥–∏)
- ‚úÖ `src/store/sessionStore.ts` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ (–∫–∞–º–µ—Ä–∞, FPS, –º–µ—Ç—Ä–∏–∫–∏, –ª–æ–≥–∏)

### Hooks
- ‚úÖ `src/hooks/useVideoStream.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–æ–º –∏ –∫–∞–º–µ—Ä–æ–π
- ‚úÖ `src/hooks/useRoi.ts` - –ª–æ–≥–∏–∫–∞ Region of Interest (–ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ, —Ä–µ—Å–∞–π–∑)
- ‚úÖ `src/hooks/useOpenCV.ts` - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ OpenCV.js
- ‚úÖ `src/hooks/useImageProcessing.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–¥—Ä–æ–≤ –∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- ‚úÖ `src/hooks/useOpticalFlow.ts` - –æ–ø—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ç–æ–∫ (—Å–ª–µ–¥ —Å–æ–ø–ª–∞)
- ‚úÖ `src/hooks/useHistoryStats.ts` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏–π
- ‚úÖ `src/hooks/useSpeech.ts` - –æ–∑–≤—É—á–∫–∞ —Å–æ–≤–µ—Ç–æ–≤
- ‚úÖ `src/hooks/useCsvLog.ts` - —ç–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤ –≤ CSV
- ‚úÖ `src/hooks/useSettings.ts` - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –ê–ª–≥–æ—Ä–∏—Ç–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ `src/lib/processing/baseline.ts` - –¥–µ—Ç–µ–∫—Ü–∏—è –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏ (–•–∞—Ñ + fallback)
- ‚úÖ `src/lib/processing/edges.ts` - –¥–µ—Ç–µ–∫—Ü–∏—è –∫—Ä–∞–µ–≤ (Canny + Sobel fallback)
- ‚úÖ `src/lib/processing/measure.ts` - –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã –∏ —à–∏—Ä–∏–Ω—ã
- ‚úÖ `src/lib/processing/overlays.ts` - —Ä–∏—Å–æ–≤–∞–Ω–∏–µ –æ–≤–µ—Ä–ª–µ–µ–≤ –Ω–∞ canvas
- ‚úÖ `src/lib/processing/advice.ts` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É–º–Ω—ã—Ö —Å–æ–≤–µ—Ç–æ–≤

### UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ `src/components/ai-observer/TopBar.tsx` - –≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ `src/components/ai-observer/CameraPanel.tsx` - –ø–∞–Ω–µ–ª—å —Å –≤–∏–¥–µ–æ
- ‚úÖ `src/components/ai-observer/RoiOverlay.tsx` - –æ–≤–µ—Ä–ª–µ–∏ –Ω–∞ –≤–∏–¥–µ–æ
- ‚úÖ `src/components/ai-observer/MetricsCards.tsx` - –∫–∞—Ä—Ç–æ—á–∫–∏ –º–µ—Ç—Ä–∏–∫
- ‚úÖ `src/components/ai-observer/StatusBanner.tsx` - –±–∞–Ω–Ω–µ—Ä —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ `src/components/ai-observer/HistoryCharts.tsx` - –≥—Ä–∞—Ñ–∏–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ `src/components/ai-observer/BottomLog.tsx` - –Ω–∏–∂–Ω–∏–π –ª–æ–≥ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ `src/components/ai-observer/SettingsPanel.tsx` - –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ `src/components/ai-observer/CalibrationDialog.tsx` - –¥–∏–∞–ª–æ–≥ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- ‚úÖ `src/pages/AIObserver.tsx` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `AI_OBSERVER_README.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ `QUICKSTART_AI_OBSERVER.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- ‚úÖ `AI_OBSERVER_CHANGES.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª

## üîß –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### `src/App.tsx`
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `AIObserver`
- –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/ai-observer` (–±–µ–∑ Layout)

### `package.json`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `zustand`

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
AI Observer Application
‚îÇ
‚îú‚îÄ‚îÄ UI Layer (React Components)
‚îÇ   ‚îú‚îÄ‚îÄ TopBar - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π, –∫–Ω–æ–ø–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ CameraPanel - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ RoiOverlay - –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–≤–µ—Ä–ª–µ–∏
‚îÇ   ‚îú‚îÄ‚îÄ MetricsCards - —Ç–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ StatusBanner - —Å—Ç–∞—Ç—É—Å –∏ —Å–æ–≤–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ HistoryCharts - –≥—Ä–∞—Ñ–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ BottomLog - –ª–æ–≥–∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ SettingsPanel - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ Business Logic (Hooks)
‚îÇ   ‚îú‚îÄ‚îÄ useVideoStream - –∑–∞—Ö–≤–∞—Ç –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ useRoi - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ROI
‚îÇ   ‚îú‚îÄ‚îÄ useImageProcessing - –∞–Ω–∞–ª–∏–∑ –∫–∞–¥—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ useOpticalFlow - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ useHistoryStats - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ useSpeech - –æ–∑–≤—É—á–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ useCsvLog - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ
‚îú‚îÄ‚îÄ Processing Algorithms
‚îÇ   ‚îú‚îÄ‚îÄ baseline detection (Hough Lines)
‚îÇ   ‚îú‚îÄ‚îÄ edge detection (Canny/Sobel)
‚îÇ   ‚îú‚îÄ‚îÄ measurements (height/width)
‚îÇ   ‚îî‚îÄ‚îÄ advice generation (rules engine)
‚îÇ
‚îî‚îÄ‚îÄ State Management (Zustand)
    ‚îú‚îÄ‚îÄ settingsStore - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ‚îî‚îÄ‚îÄ sessionStore - —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Å—Å–∏–∏
```

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ó–∞—Ö–≤–∞—Ç –≤–∏–¥–µ–æ** - MediaDevices API, –≤—ã–±–æ—Ä –∫–∞–º–µ—Ä—ã
2. **ROI** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–º–∫–∞ —Å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º –∏ —Ä–µ—Å–∞–π–∑–æ–º
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**:
   - –î–µ—Ç–µ–∫—Ü–∏—è –±–∞–∑–æ–≤–æ–π –ª–∏–Ω–∏–∏ (—Å—Ç–æ–ª –ø—Ä–∏–Ω—Ç–µ—Ä–∞)
   - –î–µ—Ç–µ–∫—Ü–∏—è –≤–µ—Ä—Ö–Ω–µ–π –∫—Ä–æ–º–∫–∏ —Å–ª–æ—è
   - –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—ã—Å–æ—Ç—ã —Å–ª–æ—è
   - –ò–∑–º–µ—Ä–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –¥–æ—Ä–æ–∂–∫–∏
4. **OpenCV.js –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Å graceful fallback –Ω–∞ Canvas2D
5. **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞** - 2-—Ç–æ—á–µ—á–Ω–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ px‚Üî–º–º
6. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - —Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ, —Å—Ä–µ–¥–Ω–µ–µ, –¥–∏—Å–ø–µ—Ä—Å–∏—è
7. **–£–º–Ω—ã–µ —Å–æ–≤–µ—Ç—ã** - –∞–Ω–∞–ª–∏–∑ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
8. **–û–∑–≤—É—á–∫–∞** - Web Speech API —Å throttling
9. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** - CSV —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
10. **–ì—Ä–∞—Ñ–∏–∫–∏** - Canvas-based charts –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä
npm run dev

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://localhost:5173/ai-observer
```

## üìù TypeScript

–í—Å–µ —Ñ–∞–π–ª—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:
- Strict mode
- Explicit return types
- Interface-based props
- No any (–∫—Ä–æ–º–µ OpenCV –∏ edge cases)

## üé® Tailwind CSS

–í—Å–µ —Å—Ç–∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ Tailwind utility classes:
- Responsive design
- Dark theme ready
- Consistent spacing/colors
- Hover/focus states

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- requestAnimationFrame –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞
- Throttled processing (20-30 FPS)
- ROI downscaling –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- Graceful fallback –±–µ–∑ OpenCV
- Zustand –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ state management

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ù–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- MediaDevices —Å permission request
- localStorage –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ (Zustand persist)

## üì± –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- Chrome/Edge: ‚úÖ Full support
- Firefox: ‚úÖ Full support
- Safari: ‚ö†Ô∏è Partial (—Ç—Ä–µ–±—É–µ—Ç HTTPS –¥–ª—è –∫–∞–º–µ—Ä—ã)
- Mobile: ‚ö†Ô∏è –†–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è

## üêõ Known Issues & Limitations

1. OpenCV.js –±–æ–ª—å—à–æ–π (~8MB) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
2. Safari —Ç—Ä–µ–±—É–µ—Ç HTTPS –¥–ª—è getUserMedia
3. –û–ø—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ç–æ–∫ - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (–¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –Ω—É–∂–µ–Ω Farneback)
4. –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ - manual 2-point (–º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å auto-calibration)

## üîÆ Future Improvements

- [ ] Auto-calibration —á–µ—Ä–µ–∑ ArUco –º–∞—Ä–∫–µ—Ä—ã
- [ ] –ë–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π optical flow (Lucas-Kanade)
- [ ] 3D –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—á–∞—Ç–∏
- [ ] WebGL –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- [ ] Multi-camera support
- [ ] Export –≤ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã (JSON, XML)
- [ ] Cloud sync –¥–ª—è –ª–æ–≥–æ–≤

---

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

