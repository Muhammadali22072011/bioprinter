<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Image Upload</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #0E1116;
            color: #F5F7FA;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
        }
        
        .container {
            background: #171B23;
            padding: 30px;
            border-radius: 12px;
            border: 1px solid rgba(0, 211, 167, 0.3);
        }
        
        h1 {
            text-align: center;
            color: #00D3A7;
            margin-bottom: 30px;
        }
        
        .upload-section {
            background: rgba(0, 211, 167, 0.1);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid rgba(0, 211, 167, 0.3);
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-size: 0.875rem;
            color: #F5F7FA;
            margin-bottom: 10px;
            cursor: pointer;
        }
        
        #test-upload-btn {
            width: 100%;
            padding: 12px;
            background: rgba(0, 211, 167, 0.2);
            color: #00D3A7;
            border: 1.5px solid #00D3A7;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        #test-upload-btn:hover {
            background: rgba(0, 211, 167, 0.25);
            box-shadow: 0 0 20px rgba(0, 211, 167, 0.3);
            transform: translateY(-2px);
        }
        
        #test-status {
            margin-top: 10px;
            font-size: 0.875rem;
            text-align: center;
            color: #8B92A8;
            min-height: 20px;
        }
        
        .console {
            background: #0E1116;
            border: 1px solid rgba(0, 211, 167, 0.2);
            border-radius: 6px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .console-line {
            margin: 4px 0;
            padding: 2px 0;
        }
        
        .log { color: #8B92A8; }
        .info { color: #00D3A7; }
        .warn { color: #FFB020; }
        .error { color: #FF4757; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h1>
        
        <div class="upload-section">
            <label for="test-upload">üì∑ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</label>
            <input type="file" id="test-upload" accept="image/*" style="display: none;">
            <button id="test-upload-btn">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</button>
            <p id="test-status"></p>
        </div>
        
        <div>
            <h3 style="color: #00D3A7; margin-top: 30px;">üìã –õ–æ–≥–∏ –∫–æ–Ω—Å–æ–ª–∏:</h3>
            <div class="console" id="console"></div>
        </div>
    </div>
    
    <script>
        // Simple logger
        const consoleEl = document.getElementById('console');
        
        function log(message, type = 'log') {
            const line = document.createElement('div');
            line.className = `console-line ${type}`;
            line.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            consoleEl.appendChild(line);
            consoleEl.scrollTop = consoleEl.scrollHeight;
            console.log(`[${type.toUpperCase()}]`, message);
        }
        
        const uploadBtn = document.getElementById('test-upload-btn');
        const uploadInput = document.getElementById('test-upload');
        const statusEl = document.getElementById('test-status');
        
        log('‚úì –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'info');
        log(`‚úì –ö–Ω–æ–ø–∫–∞ –Ω–∞–π–¥–µ–Ω–∞: ${uploadBtn ? '–¥–∞' : '–Ω–µ—Ç'}`, 'info');
        log(`‚úì –ò–Ω–ø—É—Ç –Ω–∞–π–¥–µ–Ω: ${uploadInput ? '–¥–∞' : '–Ω–µ—Ç'}`, 'info');
        
        uploadBtn.addEventListener('click', function() {
            log('‚Üí –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏', 'info');
            uploadInput.click();
        });
        
        uploadInput.addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (!file) {
                log('‚úó –§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω', 'warn');
                return;
            }
            
            log(`‚úì –§–∞–π–ª –≤—ã–±—Ä–∞–Ω: ${file.name}`, 'info');
            log(`  –¢–∏–ø: ${file.type}`, 'log');
            log(`  –†–∞–∑–º–µ—Ä: ${(file.size / 1024).toFixed(2)} KB`, 'log');
            
            // Validate
            if (!file.type.startsWith('image/')) {
                statusEl.textContent = '‚ùå –≠—Ç–æ –Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!';
                log('‚úó –û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞', 'error');
                return;
            }
            
            if (file.size > 5 * 1024 * 1024) {
                statusEl.textContent = '‚ùå –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (–º–∞–∫—Å 5MB)';
                log('‚úó –û—à–∏–±–∫–∞: —Ñ–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π', 'error');
                return;
            }
            
            statusEl.textContent = '‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...';
            log('‚Üí –ù–∞—á–∞–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏...', 'info');
            
            const reader = new FileReader();
            reader.onload = function(e) {
                log('‚úì –§–∞–π–ª –ø—Ä–æ—á–∏—Ç–∞–Ω', 'info');
                
                const img = new Image();
                img.onload = function() {
                    log(`‚úì –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: ${img.width}x${img.height}px`, 'info');
                    statusEl.textContent = '‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!';
                };
                img.onerror = function() {
                    log('‚úó –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è', 'error');
                    statusEl.textContent = '‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
                };
                img.src = e.target.result;
            };
            reader.onerror = function() {
                log('‚úó –û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞', 'error');
                statusEl.textContent = '‚ùå –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è';
            };
            reader.readAsDataURL(file);
        });
        
        log('‚úì –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –ø–æ–¥–∫–ª—é—á–µ–Ω—ã', 'info');
    </script>
</body>
</html>
